---
import { formatDateByTimeZone } from '@/lib/utils'
import getLastUpdatedTime from '@/pages/api/_services/github/repoInfo'

interface Props {
  class?: string
}

let formattedDate: string | null = null
try {
  const data = await getLastUpdatedTime('ritikvirus', 'ritikvirus-portfolio')
  const pushedAt = (data as any)?.pushedAt
  if (pushedAt) {
    const date = new Date(pushedAt)
    formattedDate = formatDateByTimeZone(date)
  }
} catch {
  // Ignore network errors at build time; omit the footer timestamp
}

const { class: className } = Astro.props
---
{formattedDate ? (
  <p class:list={['text-xs min-[961px]:self-end', className]}>
    Last updated by Ritik <br class='xs:hidden' /> on {formattedDate} UTC+7
  </p>
) : null}
